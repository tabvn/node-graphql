{"version":3,"sources":["../src/schema.js"],"names":["Schema","ctx","_schema","models","queryFields","mutationFields","each","model","assign","query","Object","mutation","Query","name","fields","Mutation"],"mappings":";;;;;;;;AAAA;;AAWA;;;;;;;;IAEqBA,M;AAEjB,oBAAYC,GAAZ,EAAiB;AAAA;;AAEb,aAAKA,GAAL,GAAWA,GAAX;AACA,aAAKC,OAAL,GAAe,IAAf;AACH;;;;iCAEQ;;AAEL,gBAAI,KAAKA,OAAT,EAAkB;AACd,uBAAO,KAAKA,OAAZ;AACH;;AAED,gBAAMC,SAAS,KAAKF,GAAL,CAASE,MAAxB;;AAEA,gBAAIC,cAAc,EAAlB;AACA,gBAAIC,iBAAiB,EAArB;;AAEA,6BAAEC,IAAF,CAAOH,MAAP,EAAe,UAACI,KAAD,EAAW;AACtBH,8BAAc,iBAAEI,MAAF,CAASJ,WAAT,EAAsBG,MAAME,KAAN,EAAtB,CAAd;AACAJ,iCAAiBK,OAAOF,MAAP,CAAcH,cAAd,EAA8BE,MAAMI,QAAN,EAA9B,CAAjB;AACH,aAHD;;AAKA,gBAAMC,QAAQ,+BAAsB;AAChCC,sBAAM,OAD0B,EACZ;AACpBC,wBAAQ;AAAA,2BAAOV,WAAP;AAAA;AAFwB,aAAtB,CAAd;;AAMA,gBAAIW,WAAW,+BAAsB;AACjCF,sBAAM,UAD2B;AAEjCC,wBAAQ;AAAA,2BAAOT,cAAP;AAAA;AAFyB,aAAtB,CAAf;;AAMA,iBAAKH,OAAL,GAAe,2BAAkB;AAC7BO,uBAAOG,KADsB;AAE7BD,0BAAUI;AAFmB,aAAlB,CAAf;;AAKA,mBAAO,KAAKb,OAAZ;AACH;;;;;;kBA1CgBF,M","file":"schema.js","sourcesContent":["import {\n    GraphQLObjectType,\n    GraphQLSchema,\n    GraphQLString,\n    GraphQLInt,\n    GraphQLNonNull,\n    GraphQLList,\n    GraphQLID,\n    GraphQLError\n} from 'graphql';\n\nimport _ from 'lodash'\n\nexport default class Schema {\n\n    constructor(ctx) {\n\n        this.ctx = ctx;\n        this._schema = null;\n    }\n\n    schema() {\n\n        if (this._schema) {\n            return this._schema;\n        }\n\n        const models = this.ctx.models;\n\n        let queryFields = {};\n        let mutationFields = {};\n\n        _.each(models, (model) => {\n            queryFields = _.assign(queryFields, model.query());\n            mutationFields = Object.assign(mutationFields, model.mutation());\n        });\n\n        const Query = new GraphQLObjectType({\n            name: 'Query',      //Return this type of object\n            fields: () => (queryFields)\n        });\n\n\n        let Mutation = new GraphQLObjectType({\n            name: \"Mutation\",\n            fields: () => (mutationFields)\n        });\n\n\n        this._schema = new GraphQLSchema({\n            query: Query,\n            mutation: Mutation\n        });\n\n        return this._schema;\n    }\n}\n"]}